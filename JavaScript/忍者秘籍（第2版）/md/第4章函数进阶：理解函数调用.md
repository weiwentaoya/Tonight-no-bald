## ç†è§£å‡½æ•°è°ƒç”¨
`ä¸ºä»€ä¹ˆthiså‚æ•°è¡¨ç¤ºå‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼Ÿ`

`å‡½æ•°å’Œæ–¹æ³•ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ`

`å¦‚æœä¸€ä¸ªæ„é€ å‡½æ•°æ˜¾å¼åœ°è¿”å›ä¸€ä¸ªå¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ`

## ä½¿ç”¨éšå¼å‡½æ•°å‚æ•°

åœ¨å‡½æ•°å®šä¹‰ä¸­æ˜¾å¼å£°æ˜çš„å‚æ•°ä¹‹å¤–ï¼Œå‡½æ•°è°ƒç”¨æ—¶è¿˜ä¼šä¼ é€’ä¸¤ä¸ªéšå¼çš„å‚æ•°ï¼šargumentså’Œthis

éšå¼çš„å‚æ•°åœ¨å‡½æ•°å£°æ˜ä¸­æ²¡æœ‰æ˜ç¡®çš„å®šä¹‰ï¼Œä½†ä¼šé»˜è®¤ä¼ é€’ç»™å‡½æ•°å¹¶ä¸”å¯ä»¥åœ¨å‡½æ•°ä¸­æ­£å¸¸è®¿é—®ã€‚åœ¨å‡½æ•°å†…å¯ä»¥æƒ³åƒå…¶ä»–æ˜ç¡®å®šä¹‰çš„å‚æ•°ä¸€æ ·å¼•ç”¨å®ƒä»¬ã€‚

### argumentså‚æ•°

argumentså‚æ•°æ˜¯ä¼ é€’ç»™å‡½æ•°çš„æ‰€æœ‰å‚æ•°é›†åˆï¼Œæ— è®ºæ˜¯å¦æœ‰æ˜ç¡®å®šä¹‰å¯¹åº”çš„å½¢å‚ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬éƒ½å¯ä»¥è®¿é—®åˆ°å‡½æ•°çš„æ‰€æœ‰å‚æ•°

ä¸¾ä¸ªğŸŒ°

```js
function whatever(a, b, c){
  assert(a === 1, 'The value of a is 1');
  assert(b === 2, 'The value of b is 2');
  assert(c === 3, 'The value of c is 3');

  assert(arguments.length === 5,
         'Weâ€™ve passed in 5 parameters');

  assert(arguments[0] === a,
         'The first argument is assigned to a');
  assert(arguments[1] === b,
         'The second argument is assigned to b');
  assert(arguments[2] === c,
         'The third argument is assigned to c');

  assert(arguments[3] === 4,
         'We can access the fourth argument');
  assert(arguments[4] === 5,
         'We can access the fifth argument');
}

whatever(1,2,3,4,5);

function assert(value, text){
  value&&console.log(text)
}

// The value of a is 1
// The value of b is 2
// The value of c is 3
// Weâ€™ve passed in 5 parameters
// The first argument is assigned to a
// The second argument is assigned to b
// The third argument is assigned to c
// We can access the fourth argument
// We can access the fifth argument
```

ä»¥ä¸Šä»£ç ä¸­whateverå‡½æ•°åªå®šä¹‰äº†ä¸‰ä¸ªå½¢å‚ï¼Œä½†åœ¨ä¼ å…¥çš„æ—¶å€™ä¼ å…¥äº†5ä¸ªå®å‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›¸åº”çš„å‡½æ•°å‚æ•°aã€bã€cè®¿é—®åˆ°å‰ä¸‰ä¸ªå‚æ•°çš„å€¼

å¯ä»¥é€šè¿‡arguments.lengthæ¥è®¿é—®ä¼ é€’ç»™å‡½æ•°çš„å®é™…å‚æ•°çš„ä¸ªæ•°

å¯ä»¥é€šè¿‡æ•°ç»„ä¸‹æ ‡çš„æ–¹å¼è®¿é—®åˆ°argumentsä¸­çš„æ¯ä¸ªå‚æ•°

æ³¨æ„âš ï¸ï¼šargumentså¹¶ä¸æ˜¯çœŸæ­£çš„æ•°ç»„ï¼Œç§°ä¸ºç±»æ•°ç»„ï¼Œå› ä¸ºå¹¶ä¸èƒ½å°è¯•ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•ï¼ˆä¾‹å¦‚sortï¼‰

#### æ— å‚æ•°å‡½æ•°

å½“å®šä¹‰ä¸€ä¸ªæ²¡æœ‰æ˜¾å¼å£°æ˜ä»»ä½•å‚æ•°çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡argumentså±æ€§æ¥è®¿é—®

ä¸¾ä¸ªğŸŒ°

```js
function sum() {
  var sum = 0;
  for(var i = 0; i < arguments.length; i++){
    sum += arguments[i];
  }
  return sum;
}

assert(sum(1, 2) === 3, "We can add two numbers");
assert(sum(1, 2, 3) === 6, "We can add three numbers");
assert(sum(1, 2, 3, 4) === 10, "We can add four numbers");
function assert(value, text){
  value&&console.log(text)
}
// We can add two numbers
// We can add three numbers
// We can add four numbers
```

ä»¥ä¸Šä»£ç å®šä¹‰äº†ä¸€ä¸ªæ²¡æœ‰æ˜¾å¼å£°æ˜å‚æ•°çš„sumå‡½æ•°ï¼Œé€šè¿‡argumentså¯¹è±¡è®¿é—®æ‰€æœ‰çš„å‡½æ•°å‚æ•°ï¼Œè®¡ç®—å®ƒä»¬çš„å’Œ

### thiså‚æ•°ï¼šå‡½æ•°ä¸Šä¸‹æ–‡

å½“å‡½æ•°è°ƒç”¨æ—¶ï¼Œé™¤äº†æ˜¾ç¤ºæä¾›çš„å‚æ•°å¤–ï¼Œthiså‚æ•°ä¹Ÿä¼šé»˜è®¤ä¼ é€’ç»™å‡½æ•°ã€‚thiså‚æ•°æ˜¯é¢å‘å¯¹è±¡JavaScriptç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä»£è¡¨å‡½æ•°è°ƒç”¨ç›¸å…³è”çš„å¯¹è±¡ã€‚é€šå¸¸ç§°ä¸ºå‡½æ•°ä¸Šä¸‹æ–‡

## å‡½æ•°è°ƒç”¨

å‡½æ•°çš„è°ƒç”¨æ–¹å¼å¯¹å‡½æ•°å†…ä»£ç çš„æ‰§è¡Œæœ‰å¾ˆå¤§çš„å½±å“ï¼Œä¸»è¦ä½“ç°åœ¨thiså‚æ•°ä»¥åŠå‡½æ•°ä¸Šä¸‹æ–‡æ˜¯å¦‚ä½•å»ºç«‹çš„

é¦–å…ˆäº†è§£å‡½æ•°çš„å››ç§è°ƒç”¨æ–¹å¼

- ä½œä¸ºä¸€ä¸ªå‡½æ•°ç›´æ¥è¢«è°ƒç”¨â€”fun()
- ä½œä¸ºä¸€ä¸ªæ–¹æ³•ï¼Œå…³è”åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œå®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹â€”obj.fun()
- ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„å¯¹è±¡â€”new Person()
- é€šè¿‡å‡½æ•°çš„applyæˆ–è€…callæ–¹æ³•â€”fun.apply(obj)æˆ–è€…fun.call(obj)

### ä½œä¸ºå‡½æ•°ç›´æ¥è¢«è°ƒç”¨

é€šè¿‡()è¿ç®—ç¬¦è°ƒç”¨ä¸€ä¸ªå‡½æ•° ï¼Œä¸”è¢«æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼ä¸æ˜¯ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§å­˜åœ¨æ—¶ï¼Œå°±å±äºç›´æ¥è°ƒç”¨

åœ¨è¿™ç§æ–¹å¼è°ƒç”¨æ—¶ï¼Œå‡½æ•°ä¸Šä¸‹æ–‡(this)æœ‰ä¸¤ç§å¯èƒ½ï¼šåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆwindowå¯¹è±¡ï¼‰ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯undefined

ä¸¾ä¸ªğŸŒ°

```js
function ninja() {
  return this;
}

function samurai() {
  "use strict";
  return this;
}

assert(ninja() === window,"the context is the global window object");

assert(samurai() === undefined,"the context is undefined");

function assert(value, text){
  value&&console.log(text)
}

// the context is the global window object
// the context is undefined
```

### ä½œä¸ºæ–¹æ³•è¢«è°ƒç”¨

å½“ä¸€ä¸ªå‡½æ•°è¢«èµ‹å€¼ç»™ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¹¶é€šè¿‡å¯¹è±¡å±æ€§å¼•ç”¨çš„æ–¹å¼è°ƒç”¨æ—¶ï¼Œå‡½æ•°ä¼šä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨ã€‚

è¿™ç§æƒ…å†µä¸‹å‡½æ•°è¢«ç§°ä¸ºæ–¹æ³•ï¼Œåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­æ–¹æ³•å†…éƒ¨çš„thiså¯ä»¥è®¿é—®åˆ°å¯¹è±¡çš„ä¸»ä½“ï¼Œè¿™é‡Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œå½“ä¸€ä¸ªå‡½æ•°è¢«ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œè¯¥å¯¹è±¡ä¼šæˆä¸ºå‡½æ•°çš„ä¸Šä¸‹æ–‡

ä¸¾ä¸ªğŸŒ°

```js
function whatsMyContext() {
  return this;
}

assert(whatsMyContext() === window,"Function call on window");

var getMyThis = whatsMyContext;

assert(getMyThis() === window,"Another function call in window");

var ninja1 = {
  getMyThis: whatsMyContext
};

assert(ninja1.getMyThis() === ninja1,"Working with 1st ninja");

var ninja2 = {
  getMyThis: whatsMyContext
};

assert(ninja2.getMyThis() === ninja2,"Working with 2nd ninja");

function assert(value, text){
  value&&console.log(text)
}

// Function call on window
// Another function call in window
// Working with 1st ninja
// Working with 2nd ninja
```

ä»¥ä¸Šä»£ç ä¸­

whatsMyContextå‡½æ•°å”¯ä¸€çš„åŠŸèƒ½æ˜¯è¿”å›å®ƒçš„å‡½æ•°ä¸Šä¸‹æ–‡

1. å½“ç›´æ¥é€šè¿‡å‡½æ•°è°ƒç”¨æ—¶ï¼Œå‡½æ•°ä¸Šä¸‹æ–‡æ˜¯å…¨å±€ä¸Šä¸‹æ–‡window
2. å½“é€šè¿‡å˜é‡getMyThiså¼•ç”¨whatsMyContextå‡½æ•°æ—¶ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹å‡½æ•°çš„ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯window
3. ç‚¹åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­çš„å±æ€§getMyThiså¼•ç”¨whatsMyContextå‡½æ•°æ—¶ï¼Œé€šè¿‡æ–¹æ³•å¼•ç”¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ä¸Šä¸‹æ–‡ä¸ºè¯¥å¯¹è±¡æ‰€åœ¨çš„å¯¹è±¡

### ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨

æ„é€ å‡½æ•°çš„æ–¹å¼è°ƒç”¨ï¼Œéœ€è¦åœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰ä½¿ç”¨å…³é”®å­—new

å°†å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨æ˜¯JavaScriptä¸­ä¸€ä¸ªå¼ºå¤§çš„ç‰¹æ€§ã€‚ä½¿ç”¨newå…³é”®å­—è°ƒç”¨ä¼šè§¦å‘ä»¥ä¸‹å‡ ä¸ªåŠ¨ä½œ

1. åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡
2. è¯¥å¯¹è±¡ä½œä¸ºthiså‚æ•°ä¼ é€’ç»™æ„é€ å‡½æ•°ï¼Œä»è€Œæˆä¸ºæ„é€ å‡½æ•°çš„å‡½æ•°ä¸Šä¸‹æ–‡
3. æ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç 
4. æ–°æ„é€ çš„å¯¹è±¡ä½œä¸ºnewè¿ç®—ç¬¦çš„è¿”å›å€¼

ä¸¾ä¸ªğŸŒ°

```js
function Ninja() {
  this.skulk = function() {
    return this;
  };
}

var ninja1 = new Ninja();
var ninja2 = new Ninja();

assert(ninja1.skulk() === ninja1,"The 1st ninja is skulking");
assert(ninja2.skulk() === ninja2,"The 2nd ninja is skulking");

function assert(value, text){
  value&&console.log(text)
}

// The 1st ninja is skulking
// The 2nd ninja is skulking
```

ä»¥ä¸Šä»£ç é€šè¿‡ä¸¤æ¬¡è°ƒç”¨å®šä¹‰çš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºäº†ä¸¤ä¸ªæ–°çš„å¯¹è±¡ã€‚å°†è¿”å›ç»“æœä¿å­˜åœ¨å˜é‡ä¸­ï¼Œé€šè¿‡å˜é‡å¼•ç”¨æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚

#### æ„é€ å‡½æ•°çš„è¿”å›å€¼

æ³¨æ„âš ï¸ï¼šæ„é€ å‡½æ•°é€šå¸¸ä»¥å¤§å†™å­—æ¯å¼€å¤´

æ„é€ å‡½æ•°çš„ç›®çš„æ˜¯åˆå§‹åŒ–æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå¹¶ä¸”æ–°æ„é€ çš„å¯¹è±¡ä¼šä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨ç»“æœè¿”å›ã€‚ä½†å½“æ„é€ å‡½æ•°è‡ªèº«æœ‰è¿”å›å€¼æ—¶æ˜¯ä»€ä¹ˆç»“æœå‘¢

ä¸¾ä¸ªğŸŒ°

```js
function Ninja() {
  this.skulk = function () {
    return true;
  };

  return 1;
}
var ninja = new Ninja();
assert(Ninja() === 1,"Return value honored when not called as a constructor");

assert(typeof ninja === "object","Object returned when called as a constructor");

function assert(value, text){
  value&&console.log(text)
}

// Return value honored when not called as a constructor
// Object returned when called as a constructor
```

ä»¥ä¸Šä»£ç ä¸­Ninjaå‡½æ•°è™½ç„¶ä¼šæ¯äº†æ•°å­—1ï¼Œä½†å¯¹ä»£ç æ²¡æœ‰å½±å“ã€‚å¦‚æœNinjaä½œä¸ºä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œä¼šè¿”å›1ï¼Œä½†æ˜¯å¦‚æœé€šè¿‡newå…³é”®å­—å°†å…¶ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼Œæ„é€ å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯1

åœ¨ä¸¾ä¸ªğŸŒ°

```js
 var puppet = {
   rules: false
 };

function Emperor() {
  this.rules = true;
  return puppet;
}

var emperor = new Emperor();

assert(emperor === puppet, "The emperor is merely a puppet!");
assert(emperor.rules === false, "The puppet does not know how to rule!");
function assert(value, text){
  value&&console.log(text)
}

// The emperor is merely a puppet!
// The puppet does not know how to rule!
```

ä¸Šé¢ä»£ç ç¨æœ‰ä¸åŒï¼Œä¸»è¦æ˜¯å‡½æ•°ä¸­è¿”å›äº†puppetæ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œç»“æœå´æ˜¯æˆªç„¶ä¸åŒã€‚ç”±æ­¤å¯çŸ¥ï¼š

å¦‚æœæ„é€ å‡½æ•°è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¯¥å¯¹è±¡å°†ä½œä¸ºæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼è¿”å›ï¼Œè€Œä¼ å…¥çš„thiså°†è¢«ä¸¢å¼ƒ

ä½†æ˜¯å¦‚æœæ„é€ å‡½æ•°çš„è¿”å›å€¼æ˜¯éå¯¹è±¡ç±»å‹ï¼Œåˆ™è¿”å›å€¼è¢«å¿½ç•¥ï¼Œè¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡

### ä½¿ç”¨applyå’Œcallæ–¹æ³•è°ƒç”¨

åœ¨ä¸€äº›ç‰¹å®šçš„åœºæ™¯ä¸­æˆ‘ä»¬æˆ–è®¸æƒ³è¦æ”¹å˜å‡½æ•°çš„ä¸Šä¸‹æ–‡

ä¸¾ä¸ªğŸŒ°

```js
function Button(){
  this.clicked = false;
  this.click = function() {
    this.clicked = true;
    assert(button.clicked,"The button has been clicked");
  }
}
var button = new Button();
var elem = document.getElementById("test");
elem.addEventListener("click", button.click);
function assert(value, text){
  value&&console.log(text)
}

//
```

ä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæŒ‰é’®ï¼Œæ£€æµ‹å®ƒæ˜¯å¦è¢«å•å‡»è¿‡ï¼Œä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªbuttonçš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œé€šè¿‡è¯¥å¯¹è±¡å­˜å‚¨è¢«å•å‡»çš„çŠ¶æ€ï¼Œå½“ä»£ç æ‰§è¡Œæ—¶ä¼šå‘ç°å¤±è´¥äº†ï¼Œä½†æ˜¯å´æ²¡æœ‰æŠ¥é”™

å…¶å®æ˜¯æµè§ˆå™¨çš„äº‹ä»¶å¤„ç†ç³»ç»Ÿå°†æŠŠè°ƒç”¨çš„ä¸Šä¸‹æ–‡å®šä¹‰ä¸ºäº‹ä»¶è§¦å‘çš„ç›®æ ‡å¯¹è±¡\<button\>å…ƒç´ äº†ï¼Œæ‰€æœ‰å½“ç‚¹å‡»æ—¶è®¾ç½®çš„çŠ¶æ€é”™è¯¯çš„å¤„ç†äº†

è€Œé€šè¿‡applyå’Œcallæ–¹æ³•å¯ä»¥è®¾ç½®å‡½æ•°çš„ä¸Šä¸‹æ–‡

#### ä½¿ç”¨applyå’Œcall

JavaScriptåœ¨å†…ç½®çš„Functionæ„é€ å‡½æ•°ä¸Šä¿å­˜äº†è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šä»»ä½•å¯¹è±¡ä½œä¸ºå‡½æ•°çš„ä¸Šä¸‹æ–‡

appleæ–¹æ³•è°ƒç”¨éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šä½œä¸ºå‡½æ•°ä¸Šä¸‹æ–‡çš„å¯¹è±¡ã€ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‡½æ•°è°ƒç”¨çš„å‚æ•°

callæ–¹æ³•ä¸applyä½¿ç”¨ç±»ä¼¼ï¼Œä¸åŒç‚¹åœ¨äºç›´æ¥ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼ä¼ é€’

ä¸¾ä¸ªğŸŒ°

```js
function juggle() {
  var result = 0;
  for (var n = 0; n < arguments.length; n++) {
    result += arguments[n];
  }
  this.result = result;
}

var ninja1 = {};
var ninja2 = {};

juggle.apply(ninja1,[1,2,3,4]);
juggle.call(ninja2, 5,6,7,8);

assert(ninja1.result === 10, "juggled via apply");
assert(ninja2.result === 26, "juggled via call");
function assert(value, text){
  value&&console.log(text)
}

// juggled via apply
// juggled via call
```

ä¸Šé¢çš„ä»£ç æ‰§è¡Œä¸­è®¾ç½®ä¸¤ä¸ªå¯¹è±¡ä½œä¸ºå‡½æ•°çš„ä¸Šä¸‹æ–‡ã€‚å½“ä»£ç æ‰§è¡Œæ—¶resultå±æ€§è¢«å­˜å‚¨åœ¨äº†ä¼ å…¥çš„ä¸Šä¸‹æ–‡ä¸­

applyå’Œcallä¹‹é—´å”¯ä¸€çš„ä¸åŒä¹‹å¤„åœ¨äºå¦‚ä½•ä¼ é€’å‚æ•°ã€‚applyä½¿ç”¨å‚æ•°æ•°ç»„ï¼Œcallä»¥æ­¤åˆ—å‡ºå‚æ•°

è¿™ä¸¤ä¸ªæ–¹æ³•å¯¹äºæŒ‡å®šä¸Šä¸‹æ–‡å¯¹è±¡æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå°¤å…¶åœ¨æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶

### è§£å†³å‡½æ•°ä¸Šä¸‹æ–‡çš„é—®é¢˜

ç®­å¤´å‡½æ•°å’Œbindæ–¹æ³•å¯ä»¥æ›´ä¼˜é›…åœ°å®ç°ç›¸åŒçš„ç»“æœ

#### ç®­å¤´å‡½æ•°

è¿˜æ˜¯æŒ‰é’®ç‚¹å‡»çš„ğŸŒ°

```js
function Button() {
  this.clicked = false;
  this.click = () => {
    this.clicked = true;
    assert(button.clicked, "The button has been clicked");
  }
}
var button = new Button();
var elem = document.getElementById("test");
elem.addEventListener("click", button.click);
function assert(value, text){
  value&&console.log(text)
}
```

ä»¥ä¸Šä»£ç ä¸­æ‰§è¡Œæ­£å¸¸

è°ƒç”¨ç®­å¤´å‡½æ•°æ—¶ï¼Œä¸ä¼šéšå¼ä¼ å…¥thiså‚æ•°ï¼Œè€Œæ˜¯ä»å®šä¹‰æ—¶çš„å‡½æ•°ç»§æ‰¿ä¸Šä¸‹æ–‡ï¼Œåœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œç®­å¤´å‡½æ•°åœ¨æ„é€ å‡½æ•°å†…éƒ¨ï¼ŒthisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡æœ¬èº«ï¼Œå› æ­¤thisæŒ‡å‘äº†æ–°åˆ›å»ºçš„buttonå¯¹è±¡

**ç®­å¤´å‡½æ•°çš„æ³¨æ„ç‚¹âš ï¸**

ç”±äºthiså€¼æ˜¯åœ¨ç®­å¤´å‡½æ•°åˆ›å»ºæ—¶ç¡®å®šçš„ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ä¸€äº›çœ‹ä¼¼å¥‡æ€ªçš„é—®é¢˜

ä¸¾ä¸ªğŸŒ°

```js
var button = {
  clicked: false,
  click: () => {
    this.clicked = true;
    assert(button.clicked,"The button has been clicked");
    assert(this == window, "In arrow function this == window");
    assert(window.clicked, "clicked is stored in window");
  }
}

var elem = document.getElementById("test");
elem.addEventListener("click", button.click);
function assert(value, text){
  value&&console.log(text)
}

// In arrow function this == window
// clicked is stored in window
```

æ‰§è¡Œä»¥ä¸Šä»£ç ä¼šå‘ç°ï¼Œbuttonå¯¹è±¡æ— æ³•è·Ÿè¸ªclickedçš„çŠ¶æ€ï¼Œè€Œä¹‹å‰è¯´ç®­å¤´å‡½æ•°åœ¨åˆ›å»ºæ—¶ç¡®å®šäº†thisçš„æŒ‡å‘ã€‚è€Œæ­¤å¤„clickç®­å¤´å‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡å­—é¢é‡å®šä¹‰çš„ï¼Œå¯¹è±¡å­—é¢é‡å®åœ¨å…¨å±€ä»£ç ä¸­å®šä¹‰çš„ï¼Œå› æ­¤ï¼Œç®­å¤´å‡½æ•°å†…éƒ¨çš„thiså€¼æ˜¯window

#### ä½¿ç”¨bindæ–¹æ³•

bindæ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œä¸åŸå‡½æ•°çš„å‡½æ•°ä½“ç›¸åŒï¼Œæ–°å‡½æ•°è¢«ç»‘å®šåˆ°æŒ‡å®šçš„å¯¹è±¡

ä¸¾ä¸ªğŸŒ°

```js
var button = {
  clicked: false,
  click: function(){
    this.clicked = true;
    assert(button.clicked,"The button has been clicked");
  }
};
var elem = document.getElementById("test");
elem.addEventListener("click", button.click.bind(button));

var boundFunction = button.click.bind(button);
assert(boundFunction !== button.click,"Calling bind creates a completyl new function");

// Calling bind creates a completyl new function
// The button has been clicked
```

ä»¥ä¸Šä»£ç ä¸­ç»‘å®šåˆ°æŒ‰é’®ç‚¹å‡»çš„äº‹ä»¶æ˜¯é€šè¿‡bindåˆ›å»ºçš„æ–°å‡½æ•°ï¼Œä¸ç®¡è¯¥å‡½æ•°åœ¨ä½•æ—¶è°ƒç”¨ï¼Œå‡½æ•°å†…éƒ¨çš„thiséƒ½æ˜¯é€šè¿‡bindåˆ›å»ºæ—¶ä¼ å…¥çš„å¯¹è±¡



## æ€»ç»“

å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œé™¤äº†ä¼ å…¥çš„åœ¨å‡½æ•°å®šä¹‰ä¸­å£°æ˜çš„å‚æ•°ä¹‹å¤–ï¼ŒåŒæ—¶è¿˜ä¼ å…¥ä¸¤ä¸ªéšå¼å‚æ•°ï¼šargumentsä¸this

argumentså‚æ•°æ—¶ä¼ å…¥å‡½æ•°çš„æ‰€æœ‰å‚æ•°çš„é›†åˆç±»æ•°ç»„ï¼Œå…·æœ‰lengthå±æ€§ã€‚

thisè¡¨ç¤ºå‡½æ•°ä¸Šä¸‹æ–‡ã€‚å‡½æ•°çš„å®šä¹‰æ–¹å¼å’Œè°ƒç”¨æ–¹å¼å†³å®šäº†thisçš„å–å€¼

å‡½æ•°çš„è°ƒç”¨æ–¹å¼æœ‰4ç§

1. ä½œä¸ºå‡½æ•°è°ƒç”¨
2. ä½œä¸ºæ–¹æ³•è°ƒç”¨
3. ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨
4. é€šè¿‡callã€applyæ–¹æ³•è°ƒç”¨

å‡½æ•°çš„è°ƒç”¨æ–¹å¼å½±å“thisçš„å–å€¼

ä½œä¸ºå‡½æ•°è°ƒç”¨ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹thisä¸ºwindowï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹thisä¸ºundefined

ä½œä¸ºæ–¹æ³•è°ƒç”¨ï¼Œthisé€šå¸¸æŒ‡å‘è°ƒç”¨çš„å¯¹è±¡

ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡

é€šè¿‡callã€applyè°ƒç”¨ï¼ŒthisæŒ‡å‘ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°

ç®­å¤´å‡½æ•°æ²¡æœ‰å•ç‹¬çš„thisï¼Œthisåœ¨ç®­å¤´å‡½æ•°åˆ›å»ºæ—¶ç¡®å®š

bingæ–¹æ³•ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œthisç»‘å®šåˆ°ä¼ å…¥çš„å‚æ•°ä¸Šã€‚è¢«ç»‘å®šçš„å‡½æ•°ä¸åŸå‡½æ•°å…·æœ‰ä¸€è‡´çš„è¡Œä¸º
