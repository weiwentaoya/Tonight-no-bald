<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="WebGL-output"></div>
</body>
<script type="module">
    import { 
        Scene, 
        Group,
        Matrix4,
        Object3D,
        Vector3
    } from "https://cdn.bootcdn.net/ajax/libs/three.js/r128/three.module.min.js"
    
    //å®‡å®™åæ ‡ç³»m1
    const m1 = new Matrix4
    m1.elements = [
        1,0,0,0,
        0,1,0,0,
        0,0,1,0,
        0,0,0,1,
    ]

    // é“¶æ²³ç³»åæ ‡ç³»m2
    const m2 = new Matrix4
    m2.elements = [
        1,0,0,0,
        0,2,0,0,
        0,0,1,0,
        1,2,3,1,
    ]

    // å¤ªé˜³ç³»åæ ‡ç³»m3
    const m3 = new Matrix4
    m3.elements = [
        1,0,0,0,
        0,1,0,0,
        0,0,3,0,
        4,5,6,1,
    ]
    // å¤ªé˜³åœ¨é“¶æ²³ç³»å†…çš„æœ¬åœ°åæ ‡ä½ç½®p1(4,5,6)
    const p2 = new Vector3(7,8,9)

    // åˆ›å»ºå®‡å®™
    const universe = new Scene
    universe.applyMatrix4(m1)

    // åˆ›å»ºé“¶æ²³ç³»
    const galaxy = new Group
    galaxy.applyMatrix4(m2)

    // åˆ›å»ºå¤ªé˜³ç³»
    const solar = new Group
    solar.applyMatrix4(m3)

    // åˆ›å»ºğŸŒearth
    const earth = new Object3D
    earth.position.copy(p2)

    // å°†é“¶æ²³ç³»æ·»åŠ åˆ°å®‡å®™ä¸­
    // å°†å¤ªé˜³ç³»æ·»åŠ åˆ°é“¶æ²³ç³»ä¸­
    // å°†åœ°çƒæ·»åŠ åˆ°å¤ªé˜³ç³»ä¸­
    universe.add(galaxy)
    galaxy.add(solar)
    solar.add(earth)

    // è·å–å¤ªé˜³åœ¨å®‡å®™ä¸­çš„ä¸–ç•Œä½ç½®
    const p = new Vector3
    earth.getWorldPosition(p)
    console.log(p);
</script>
</html>